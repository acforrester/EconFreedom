---
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README/README-fig-"
  )
```

# Economic Freedom Data

[`Installation`](#installation) | [`Datasets`](#datasets) | [`Citations`](#citations) | [`Changelog`](#changelog)

## About

`EconFreedom` contains the economic freedom scores for countries and US states from 
two sources: 

1. Economic Freedom of the World (EFW) 
2. Economic Freedom of North America (EFNA)

To see additional documentation and examples, see [here](docs/index.html).

## Contents

## Installation

```{r Init}
# install.package("devtools")
#devtools::install_github("acforrester/EconFreedom")
```

## Datasets

### Economic Freedom of the World (EFW)

The Economic Freedom of the World (EFW) report is produced by Gwartney et al.
and provides a quantitative index of the quality of countries' economic 
institutions. The index contains the following elements:

| Area      | Description                       |
| :-------- | :-------------------------------- |
| Area 1    | Size of Government                |
| Area 2    | Legal System and Property Rights  |
| Area 3    | Sound Money                       |
| Area 4    | Freedom to Trade Internationally  |
| Area 5    | Regulation                        |
| Gender Legal Rights Adjustment                |

The resulting `EFW` index is an equally weighted average of each area. The index
is only available for countries that have enough data to construct the index in 
each year and is therefore spotty in earlier years. The number of countries in
each year's `EFW` data changes as a result. Be sure to check which countries are
included in your sample before conducting any empirical cross-country comparisons.

### Economic Freedom of North America (EFNA)

The Economic Freedom of North America (EFNA) report from Stansel et al. provides
a quantitative index that measures the quality of economic institutions at the 
subnational level, viz. the U.S. states.  The index is designed to mimic the
cross-country equivalent, the EFW, and is comprised of the following indicators.

| Area      | Description                       |
| :-------- | :-------------------------------- |
| Area 1    | Government Spending               |
| Area 2    | Taxes                             |
| Area 3    | Labor Market Freedom              |

The `EFNA` index itself is an equally weighted average of the three areas. 
## Demonstration

```{r Load_Pkgs}
# load packages to use
if (!require("pacman")) install.packages("pacman")
pacman::p_load(tidyverse,plotly,DT)

```

### Economic Freedom of the World (EFW)

```{r EFW_Datatable}
# load the EFW panel
EconFreedom::efwpnl %>% 
  # keep
  arrange(-year, iso_code) %>%
  # print data
  DT::datatable(., 
                rownames = FALSE,
                extensions = c("Buttons"), 
                options = list(
                  dom = "Bfrtip",
                  buttons = c("csv", "excel", "pdf")
                  )
                )

```

```{r EFW_Map, fig.show='asis', echo=FALSE}
# a bit of cleaning for the shapefile
map_dat <- EconFreedom::efwpnl %>% 
  filter(year == max(year)) %>% 
  mutate(
    region = case_when(
      iso_code == "GBR" ~ "UK",
      iso_code == "EGY" ~ "Egypt",
      iso_code == "IRN" ~ "Iran",
      iso_code == "KGZ" ~ "Kyrgyzstan",
      iso_code == "COD" ~ "Democratic Republic of the Congo",
      iso_code == "COG" ~ "Republic of Congo",
      iso_code == "KOR" ~ "South Korea",
      iso_code == "RUS" ~ "Russia",
      iso_code == "SVK" ~ "Slovakia",
      iso_code == "SYR" ~ "Syria",
      iso_code == "VEN" ~ "Venezuela",
      iso_code == "USA" ~ "USA",
      iso_code == "YEM" ~ "Yemen",
      TRUE ~ country_name
    )
  )

# load a WGS shapefile
map_wld <- map_data("world") %>% 
  # join geodata
  left_join(., map_dat, by = "region") %>% 
  # round EFW
  mutate(EFW = round(efw_index,2))

# plotting
p <- ggplot(map_wld, aes(long, lat, 
                         group = group, 
                         text = paste0(region, " (", iso_code, ")")))+
  geom_polygon(aes(fill = EFW ), color = "white")+
  scale_fill_gradient(low = "#fc0303",
                      high = "#0b03fc",
                      na.value = "white")+
  theme_classic() + 
  theme(legend.position = "right", 
        axis.text = element_text(size = 8 , colour = "black"),
        legend.text = element_text(size = 8),
        legend.title = element_text(size = 8, face = "bold")
  ) +
  labs(x = element_blank(),
       y = element_blank(),
       title = "Economic Freedom of the World Score (2019)",
       caption = "Source: Gwartney et al. (2021)"
       )

# now call `plotly`
ggplotly(p, tooltip = c("text", "fill"))

```



### Economic Freedom of North America (EFNA)

```{r EFNA_Datatable}
# load the EFNA panel
EconFreedom::efna %>% 
  # keep
  arrange(-year, stfips) %>%  
  # print data
  DT::datatable(., 
                rownames = FALSE,
                extensions = c("Buttons"), 
                options = list(
                  dom = "Bfrtip",
                  buttons = c("csv", "excel", "pdf")
                  )
                )

```

```{r EFNA_map, fig.show='asis', echo=FALSE}
# prep EFNA for a map
map_dat <- EconFreedom::efna %>% 
  filter(year == max(year)) %>%
  mutate(region = tolower(state_name),
         EFNA   = round(efna_index, 2))

# get a shapefile and join EFNA
map_usa <- map_data("state") %>% 
  left_join(., map_dat, by = c("region"))

# plotting
p <- ggplot(map_usa, aes(long, lat, group = group))+
  geom_polygon(aes(fill = EFNA), color = "white")+
  scale_fill_viridis_c(option = "B",
                       name = "EFW Score") +
  theme_classic() + 
  theme(legend.position = "right", 
        axis.text = element_text(size = 8 , colour = "black"),
        legend.text = element_text(size = 8),
        legend.title = element_text(size = 8, face = "bold")
  ) +
  labs(x = element_blank(),
       y = element_blank(),
       title = "Economic Freedom of North America Score (2018)",
       caption = "Source: Stansel et al. (2020)"
       )

# now call `plotly`
ggplotly(p, tooltip = c("text", "fill"))


```
## Citations

James Gwartney, Robert Lawson, Joshua Hall, and Ryan Murphy (2021). *Economic Freedom Dataset, published in Economic Freedom of the World: 2021 Annual Report*. Fraser Institute. [www.fraserinstitute.org/economic-freedom/dataset](www.fraserinstitute.org/economic-freedom/dataset)

Dean Stansel, JosÃ© Torra, and Fred McMahon (2020). *Economic Freedom of North America 2020*. Fraser Institute. [https://www.fraserinstitute.org/studies/economic-freedom-of-north-america-2020](https://www.fraserinstitute.org/studies/economic-freedom-of-north-america-2020)

## Changelog

- 10/15/2021: Updated the EFW to the 2021 report and added World Bank codes and additional documentation.






